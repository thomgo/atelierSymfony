{% extends 'template.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block main %}
  <h2>Les sujets ouverts</h2>
  <!-- On parcoure tous tableaux de messages en session et on affiche le message -->
  {% for label, messages in app.flashes %}
    <!-- Pour chaque tableau on parcours les messages et le label fait office de classe -->
    {% for message in messages %}
        <div class="alert alert-{{ label }}">
            {{ message }}
        </div>
    {% endfor %}
  {% endfor %}

  <!-- On parcours la variable subjects passée à la vue dans la méthode du contrôleur -->
  {% for subject in subjects %}
    <div class="card my-3">
      <div class="card-header">
        Question de {{subject.user.username}}
      </div>
      <div class="card-body">
        <h5 class="card-title">{{subject.title}}</h5>
        <p class="card-text">{{subject.content}}</p>
        <a href="{{ path('subject', {id:subject.id})}}" class="btn btn-secondary">Voir</a>
      </div>
    </div>
  {% endfor %}
{% endblock %}
